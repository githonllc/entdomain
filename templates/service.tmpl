{{/* gotype: entgo.io/ent/entc/gen.Type */}}

// Code generated by entdomain extension. DO NOT EDIT.

package {{ base $.Config.Package }}

import (
	"context"
{{- if hasTimeFields $ }}
	"time"
{{- end }}

	"{{ entdomainPkg }}"
)

{{- $domainFields := domainFields $ }}
{{- if $domainFields }}

// {{ $.Name }}Service defines the service interface for {{ $.Name }}.
// Implement this by embedding Default{{ $.Name }}Service and overriding
// only the methods that need custom business logic.
type {{ $.Name }}Service interface {
	// Core CRUD operations
	Create(ctx context.Context, model *{{ $.Name }}DomainModel) (*{{ $.Name }}DomainModel, error)
	GetByID(ctx context.Context, id entdomain.ID) (*{{ $.Name }}DomainModel, error)
	Update(ctx context.Context, model *{{ $.Name }}DomainModel) (*{{ $.Name }}DomainModel, error)
	Delete(ctx context.Context, id entdomain.ID) error

	// Query operations
	List(ctx context.Context, req *entdomain.ListRequest) ([]*{{ $.Name }}DomainModel, int, error)
	ListByCursor(ctx context.Context, req *entdomain.ListRequest) ([]*{{ $.Name }}DomainModel, *entdomain.PageInfo, error)
	Search(ctx context.Context, req *entdomain.SearchRequest) ([]*{{ $.Name }}DomainModel, int, error)
	Count(ctx context.Context, req *entdomain.SearchRequest) (int, error)
	Exists(ctx context.Context, id entdomain.ID) (bool, error)

	// Batch operations
	CreateBatch(ctx context.Context, models []*{{ $.Name }}DomainModel) ([]*{{ $.Name }}DomainModel, error)
	UpdateBatch(ctx context.Context, models []*{{ $.Name }}DomainModel) ([]*{{ $.Name }}DomainModel, error)
	DeleteBatch(ctx context.Context, ids []entdomain.ID) error

	{{- $specificMethods := specificMethods $ }}
	{{- if $specificMethods }}

	// Entity-specific lookup methods
	{{- range $method := $specificMethods }}
	{{ $method }}
	{{- end }}
	{{- end }}
}

// Default{{ $.Name }}Service provides a default {{ $.Name }}Service implementation
// that delegates all operations to the repository. Embed this in your own
// service struct and override only the methods that need custom business logic.
//
// Example:
//
//	type my{{ $.Name }}Service struct {
//	    Default{{ $.Name }}Service
//	}
//
//	func (s *my{{ $.Name }}Service) Create(ctx context.Context, model *{{ $.Name }}DomainModel) (*{{ $.Name }}DomainModel, error) {
//	    // custom validation here
//	    return s.Default{{ $.Name }}Service.Create(ctx, model)
//	}
type Default{{ $.Name }}Service struct {
	Repo {{ $.Name }}Repository
}

// NewDefault{{ $.Name }}Service creates a Default{{ $.Name }}Service.
func NewDefault{{ $.Name }}Service(repo {{ $.Name }}Repository) *Default{{ $.Name }}Service {
	return &Default{{ $.Name }}Service{Repo: repo}
}

func (s *Default{{ $.Name }}Service) Create(ctx context.Context, model *{{ $.Name }}DomainModel) (*{{ $.Name }}DomainModel, error) {
	return s.Repo.Create(ctx, model)
}

func (s *Default{{ $.Name }}Service) GetByID(ctx context.Context, id entdomain.ID) (*{{ $.Name }}DomainModel, error) {
	return s.Repo.GetByID(ctx, id)
}

func (s *Default{{ $.Name }}Service) Update(ctx context.Context, model *{{ $.Name }}DomainModel) (*{{ $.Name }}DomainModel, error) {
	return s.Repo.Update(ctx, model)
}

func (s *Default{{ $.Name }}Service) Delete(ctx context.Context, id entdomain.ID) error {
	return s.Repo.Delete(ctx, id)
}

func (s *Default{{ $.Name }}Service) List(ctx context.Context, req *entdomain.ListRequest) ([]*{{ $.Name }}DomainModel, int, error) {
	return s.Repo.List(ctx, req)
}

func (s *Default{{ $.Name }}Service) ListByCursor(ctx context.Context, req *entdomain.ListRequest) ([]*{{ $.Name }}DomainModel, *entdomain.PageInfo, error) {
	return s.Repo.ListByCursor(ctx, req)
}

func (s *Default{{ $.Name }}Service) Search(ctx context.Context, req *entdomain.SearchRequest) ([]*{{ $.Name }}DomainModel, int, error) {
	return s.Repo.Search(ctx, req)
}

func (s *Default{{ $.Name }}Service) Count(ctx context.Context, req *entdomain.SearchRequest) (int, error) {
	return s.Repo.Count(ctx, req)
}

func (s *Default{{ $.Name }}Service) Exists(ctx context.Context, id entdomain.ID) (bool, error) {
	return s.Repo.Exists(ctx, id)
}

func (s *Default{{ $.Name }}Service) CreateBatch(ctx context.Context, models []*{{ $.Name }}DomainModel) ([]*{{ $.Name }}DomainModel, error) {
	return s.Repo.CreateBatch(ctx, models)
}

func (s *Default{{ $.Name }}Service) UpdateBatch(ctx context.Context, models []*{{ $.Name }}DomainModel) ([]*{{ $.Name }}DomainModel, error) {
	return s.Repo.UpdateBatch(ctx, models)
}

func (s *Default{{ $.Name }}Service) DeleteBatch(ctx context.Context, ids []entdomain.ID) error {
	return s.Repo.DeleteBatch(ctx, ids)
}

{{- range $field := uniqueLookupFields $ }}

func (s *Default{{ $.Name }}Service) FindBy{{ $field.StructField }}(ctx context.Context, {{ lower $field.Name }} {{ $field.Type }}) (*{{ $.Name }}DomainModel, error) {
	return s.Repo.FindBy{{ $field.StructField }}(ctx, {{ lower $field.Name }})
}
{{- end }}

{{- range $field := rangeLookupFields $ }}

func (s *Default{{ $.Name }}Service) FindBy{{ $field.StructField }}Range(ctx context.Context, start, end time.Time) ([]*{{ $.Name }}DomainModel, error) {
	return s.Repo.FindBy{{ $field.StructField }}Range(ctx, start, end)
}
{{- end }}

{{- end }}
